<html>
	<head>
		<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
		<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/react-router-dom/5.0.1/react-router-dom.js'></script>
	</head>
	<style>
		body {
			font-family: Verdana;
		}

		nav {
			display: flex;
			justify-content: space-around;
		}

		.active{
			background-color: tomato;
			color: white;
			padding: 0.5rem;
		}
	</style>
	<body>
		<div id="root"></div>
		<script type='text/babel'>
			const { render } = ReactDOM
			const { Component } = React
			const { HashRouter, Route, NavLink, Switch, Redirect } = ReactRouterDOM
			const API = "https://acme-users-api-rev.herokuapp.com/api"

			const Nav = ({ products }) => {
				const n = 5
				return (
					<nav>
						<NavLink to="/under">Under ${n} ({(products.filter(product => product.suggestedPrice < n)).length})</NavLink>
						<NavLink to="/over">{n} and Over ({(products.filter(product => product.suggestedPrice >= n)).length})</NavLink>
					</nav>
				)
			}

			class App extends Component {
				constructor() {
					super()
					this.state = {
						products : [],
						companies : [],
						offerings : []
					}
				}

				async componentDidMount() {
					const products = (await axios.get(`${API}/products`)).data
					const companies = (await axios.get(`${API}/companies`)).data
					const offerings = (await axios.get(`${API}/offerings`)).data
					this.setState({ products, companies, offerings })
				}

				render() {
					const { products } = this.state
					return (
						<HashRouter>
							<h1>Acme 5 - Over / Under</h1>
							<Route render={ () => <Nav products = {products} /> } />
						</HashRouter>
					)
				}
			}
			const root = document.querySelector('#root')
			render(<App />, root)

		</script>	
	</body>
</html>